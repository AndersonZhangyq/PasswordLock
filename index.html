<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Password Lock</title>
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="./css/bootstrap-table.min.css">
    <link rel="stylesheet" type="text/css" href="./css/index.css">
</head>

<body>
    <div class="modal fade" tabindex="-1" role="dialog" id="new-unlock-code-modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Set new unlock code</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="newUnlockCodeForm">
                        <div class="form-group">
                            <label for="password" class="col-sm-3 control-label">Unlock Code</label>
                            <div class="col-sm-8 input-group">
                                <input type="password" class="form-control" id="newUnlockCode" placeholder="Enter Unlock Code" required>
                                <span class="input-group-addon glyphicon-eye-open show-glyphicon" onclick="simpleShowPwd()"></span>
                            </div>
                            <div class="col-sm-offset-3 error-field">
                                <span class="text-danger" id="newUnlockCodeError"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password" class="col-sm-3 control-label">Retype above</label>
                            <div class="col-sm-8 input-group">
                                <input type="password" class="form-control" id="retypeUnlockCode" placeholder="Retype Unlock Code" required>
                                <span class="input-group-addon glyphicon-eye-open show-glyphicon" onclick="simpleShowPwd()"></span>
                            </div>
                            <div class="col-sm-offset-3 error-field">
                                <span class="text-danger" id="retypeUnlockCodeError"></span>
                            </div>
                        </div>
                        <div class="col-sm-offset-5">
                            <button id="setUnlockCode" type="button" class="btn btn-default">Confirm</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" id="edit-password-data" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">Edit Password</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="passwordDataForm">
                        <div class="form-group">
                            <label for="webSite" class="col-sm-3 control-label">Web Site</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="webSite" placeholder="Web Site" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="username" class="col-sm-3 control-label">User name</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="username" placeholder="User name" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password" class="col-sm-3 control-label">Password</label>
                            <div class="col-sm-9 input-group">
                                <input type="password" class="form-control" id="password" placeholder="Password" required>
                                <span class="input-group-addon glyphicon-eye-open show-glyphicon" onclick="simpleShowPwd()"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="remark" class="col-sm-3 control-label">Remarks</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="remark" placeholder="Remarks">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="remark" class="col-sm-3 control-label">Unlock Code</label>
                            <div class="col-sm-9 input-group">
                                <input type="password" class="form-control" id="unlock_code" placeholder="Unlock Code">
                                <span class="input-group-addon glyphicon-eye-open show-glyphicon" onclick="simpleShowPwd()"></span>
                            </div>
                            <div class="col-sm-offset-3 error-field">
                                <span class="text-danger" id="edit-unlockCodeError"></span>
                            </div>
                        </div>
                        <div class="col-sm-offset-5">
                            <button id="addPassword_detail" type="button" class="btn btn-default">Add Password</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" id="unlock-modal" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">Enter unlock code</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" id="unlockCodeForm">
                        <div class="col-sm-12">
                            <div class="input-group">
                                <input type="password" class="form-control" id="unlockCode" placeholder="Unlock Code" required>
                                <span class="input-group-addon glyphicon-eye-open show-glyphicon" onclick="simpleShowPwd()"></span>
                            </div>
                            <div class="error-field">
                                <span class="text-danger" id="check-unlockCodeError"></span>
                            </div>
                        </div>
                        <div class="col-sm-offset-5">
                            <button id="checkUnlockCode" type="button" class="btn btn-default" data-current-row-unique-id style="margin-top: 15px">Confirm</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="table">
            <table id="password-table" class="display table table-hover table-border" style="white-space:nowrap;overflow:hidden;table-layout:fixed"
                data-toggle="table" data-unique-id="index" data-id-field="index" data-search-align="center" data-search="true">
                <thead>
                    <tr>
                        <th data-checkbox="true" data-halign="center" data-class="align-mid" title="Select All"></th>
                        <th data-field="index" data-width="36px" data-halign="center" data-class="align-mid" data-formatter="rowNumberFormatter">#</th>
                        <th data-field="webSite" data-halign="center" data-class="align-mid" data-order="asc" data-sortable="true" data-formatter="plainTextFormatter">Web site</th>
                        <th data-field="username" data-halign="center" data-class="align-mid" data-order="asc" data-sortable="true" data-formatter="plainTextFormatter">User name</th>
                        <th data-field="password" data-halign="center" data-class="align-mid" data-order="asc" data-searchable="false" data-formatter="passowrdFormatter">Passowrd</th>
                        <th data-field="remark" data-halign="center" data-class="align-mid" data-order="asc" data-formatter="plainTextFormatter">Remark</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <ul class="side-bar">
        <li>
            <a id="add-btn" class="btn float-btn">
                <span class="show-glyphicon glyphicon-plus center-span"></span>
            </a>
        </li>
        <li>
            <a id="remove-btn" class="btn float-btn">
                <span class="show-glyphicon glyphicon-trash center-span" style="padding-right: 3px;"></span>
            </a>
        </li>
    </ul>
</body>
<script>
    window.$ = window.jQuery = require('./js/jquery-3.2.1.min.js')
    const utility = require('./render/utility.js')
    const manager = require('./render/manager.js')
</script>
<script src="./js/main-page.js"></script>
<script>
    $(document).ready(function () {
        document.getElementById('addPassword_detail').onclick = manager.appendPassowrd
        document.getElementById('checkUnlockCode').onclick = manager.checkUnlockCode
        document.getElementById('setUnlockCode').onclick = utility.setUnlockCode
        document.getElementById('add-btn').onclick = manager.addPasswordHandler
        document.getElementById('remove-btn').onclick = manager.removePasswordHandler
        $('#new-unlock-code-modal').on('hidden.bs.modal', (e) => {
            document.getElementById('newUnlockCodeError').innerHTML = ' '
            document.getElementById('retypeUnlockCodeError').innerHTML = ' '
            document.getElementById('newUnlockCodeForm').reset()
        })
        $('#edit-password-data').on('hidden.bs.modal', (e) => {
            document.getElementById('edit-unlockCodeError').innerHTML = ' '
            document.getElementById('passwordDataForm').reset()
        })
        $('#unlock-modal').on('hidden.bs.modal', (e) => {
            document.getElementById('check-unlockCodeError').innerHTML = ' '
            document.getElementById('unlockCodeForm').reset()
        })
    });

    document.onkeyup = (e) => {
        if (e.ctrlKey && e.key == 'f') {
            document.querySelector('body > div.container-fluid > div > div.bootstrap-table > div.fixed-table-toolbar > div > input').focus()
        }
    }

    function simpleShowPwd() {
        t = this.event.toElement
        if (t.previousElementSibling.type === 'password') {
            t.previousElementSibling.type = 'text'
            t.className = 'input-group-addon glyphicon-eye-close show-glyphicon'
        } else {
            t.previousElementSibling.type = 'password'
            t.className = 'input-group-addon glyphicon-eye-open show-glyphicon'
        }
    }
</script>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/bootstrap-table.js"></script>
<!-- <script src="./js/bootstrap-table.min.js"></script> -->
<script src="./js/bootstrap-table-zh-CN.min.js"></script>

</html>